@model IEnumerable<ClearMVC.Models.Refuse>
@{
    ViewBag.Title = "Follow Refuse By Customer";
}

<div class="col-md-12">
    <div class="col-md-3">
        <div class="box box-danger">
            <div class="box-header with-border">
                <h3 class="box-title">Jobs Datum</h3>
            </div>
            <div class="box-body">
                <h2 style="text-align:center;">@Model.First().ProjectDetails.StartDate.Value.ToString("dd.MM.yyyy")</h2>
            </div>
            <!-- /.box-body -->
        </div>
    </div>
    <div class="col-md-3">
        <div class="box box-danger">
            <div class="box-header with-border">
                <h3 class="box-title">Startzeite</h3>
            </div>
            <div class="box-body">
                <h2 style="text-align:center;">@Model.First().ProjectDetails.StartDate.Value.ToString("HH:mm")</h2>
            </div>
            <!-- /.box-body -->
        </div>
    </div>
    <div class="col-md-3">
        <div class="box box-danger">
            <div class="box-header with-border">
                <h3 class="box-title">Endzeite</h3>
            </div>
            <div class="box-body">
                <h2 style="text-align:center;">@Model.First().ProjectDetails.CompleteDate.ToString("HH:mm")</h2>
            </div>
            <!-- /.box-body -->
        </div>
    </div>
    <div class="col-md-3">
        <div class="box box-success">
            <div class="box-header with-border">
                <h3 class="box-title">Employee</h3>
            </div>
            <div class="box-body">
                <p style="text-align:center;">@Model.First().ProjectDetails.Users.Email</p>
            </div>
            <!-- /.box-body -->
        </div>
    </div>
</div>

<div class="col-md-12">
    <div class="box box-widget">
        <div class="box-body">
            <img class="img-responsive pad" src="@Url.Content(Model.First().FileName)">
            <p>@Model.First().RefuseText</p>
        </div>
        <!-- /.box-body -->
        <div class="box-footer box-comments">
            @foreach (var item in Model)
            {
                <div class="box-comment">
                    <div class="comment-text">
                        <span class="username">
                            @item.CreatedBy
                            <span class="text-muted pull-right">@item.LeaveDate.ToString("dd.MM.yyyy")</span>
                        </span>
                        @item.RefuseText
                    </div>
                    <!-- /.comment-text -->
                </div>
            }
        </div>
        <!-- /.box-footer -->
        @if (Model.First().ProjectDetails.IsCloseRefuseByCustomer == false && Model.First().ProjectDetails.IsRefuse == true)
        {
            <div class="box-footer">
                @using (Html.BeginForm("FollowRefuseByManager", "AdminUser", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    <div class="form-group">
                        <label class="control-label">
                            Bemerkungen
                        </label>
                        <input type="text" name="RefuseText" class="form-control input-sm" placeholder="Drücken Sie die Eingabetaste, um einen Kommentar zu schreiben">
                        <input type="hidden" name="ProjectDetailsId" value="@Model.First().ProjectDetailsId" />
                        <input type="hidden" name="ProjectId" value="@Model.First().ProjectId" />
                    </div>
                }
            </div>
        }
        else
        {
            <p>Reklamation wurde vom Auftraggeber geschlossen.</p>
        }

        <!-- /.box-footer -->
    </div>
</div>
